/*! For license information please see 174.fddf6afc.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[174],{327:function(t,e,a){"use strict";a.r(e),a.d(e,"taro_tabbar",(function(){return c}));var r=a(49),o=a(516);function n(t){return"/"===t.charAt(0)}function i(t,e){for(var a=e,r=a+1,o=t.length;r<o;a+=1,r+=1)t[a]=t[r];t.pop()}var s=function(t){var e,a=t||"",r={path:null,query:null,fragment:null};return(e=a.indexOf("#"))>-1&&(r.fragment=a.substring(e+1),a=a.substring(0,e)),(e=a.indexOf("?"))>-1&&(r.query=a.substring(e+1),a=a.substring(0,e)),r.path=a,r},b=function(t){var e=t.index,a=void 0===e?null:e,n=t.isSelected,i=void 0!==n&&n,s=t.textColor,b=void 0===s?{}:s,l=t.iconPath,d=void 0===l?"":l,h=t.badgeText,c=void 0===h?null:h,u=t.showRedDot,f=void 0!==u&&u,g=t.text,p=Object(o.a)("weui-tabbar__item",{"weui-bar__item_on":i});return Object(r.f)("a",{key:a,href:"javascript:;",class:p,onClick:function(){t.onSelect(t.index)}},Object(r.f)("span",{style:{display:"inline-block",position:"relative"}},Object(r.f)("img",{src:d,alt:"",class:"weui-tabbar__icon"}),c&&Object(r.f)("span",{class:"weui-badge taro-tabbar-badge",style:{position:"absolute",top:"-2px",right:"-13px"}},c),f&&Object(r.f)("span",{class:"weui-badge weui-badge_dot",style:{position:"absolute",top:"0",right:"-6px"}})),Object(r.f)("p",{class:"weui-tabbar__label",style:{color:b}},g))},l=a(84),d=function(t){return"/"===t[0]?t:"/"+t},h=function(t,e){return function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)}(t,e)?t.substr(e.length):t},c=function(){function t(t){var e=this;Object(r.g)(this,t),this.homePage="",this.customRoutes=[],this.tabbarPos="bottom",this.selectedIndex=-1,this.status=0,this.getOriginUrl=function(t){var a=e.customRoutes.filter((function(e){var a=e[1];return s(a).path===s(t).path}));return a.length?a[0][0]:t},this.getSelectedIndex=function(t){var a=-1;return e.list.forEach((function(e,r){var o=e.pagePath;s(t).path===s(o).path&&(a=r)})),a},this.switchTab=function(t){e.selectedIndex=t,l.redirectTo({url:e.list[t].pagePath})},this.switchTabHandler=function(t){var a=t.url,r=t.successHandler,o=t.errorHandler,s=function(t,e){void 0===e&&(e="");var a,r=t&&t.split("/")||[],o=e&&e.split("/")||[],s=t&&n(t),b=e&&n(e),l=s||b;if(t&&n(t)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var d=o[o.length-1];a="."===d||".."===d||""===d}else a=!1;for(var h=0,c=o.length;c>=0;c--){var u=o[c];"."===u?i(o,c):".."===u?(i(o,c),h++):h&&(i(o,c),h--)}if(!l)for(;h--;h)o.unshift("..");!l||""===o[0]||o[0]&&n(o[0])||o.unshift("");var f=o.join("/");return a&&"/"!==f.substr(-1)&&(f+="/"),f}(a,e.getOriginUrl(e.getCurrentUrl()||e.homePage)),b=e.getSelectedIndex(s);b>-1?(e.switchTab(b),r({errMsg:"switchTab:ok"})):o({errMsg:'switchTab:fail page "'+s+'" is not found'})},this.routerChangeHandler=function(t){var a,r;if(t&&(a=t.toLocation),a&&a.path){var o=d(a.path);r="/"===o?e.homePage:o}else r=e.getCurrentUrl();e.selectedIndex=e.getSelectedIndex(e.getOriginUrl(r))},this.setTabBarBadgeHandler=function(t){var a=t.index,r=t.text,o=t.errorHandler;a in e.list?(e.list[a].showRedDot=!1,e.list[a].badgeText=r):o({errMsg:"setTabBarBadge:fail tabbar item not found"})},this.removeTabBarBadgeHandler=function(t){var a=t.index,r=t.successHandler,o=t.errorHandler;a in e.list?(e.list[a].badgeText=null,e.list[a].badgeText=null,r({errMsg:"removeTabBarBadge:ok"})):o({errMsg:"removeTabBarBadge:fail tabbar item not found"})},this.showTabBarRedDotHandler=function(t){var a=t.index,r=t.successHandler,o=t.errorHandler,n=e.list;a in n?(n[a].badgeText=null,n[a].showRedDot=!0,r({errMsg:"showTabBarRedDot:ok"})):o({errMsg:"showTabBarRedDot:fail tabbar item not found"})},this.hideTabBarRedDotHandler=function(t){var a=t.index,r=t.successHandler,o=t.errorHandler,n=e.list;a in n?(n[a].showRedDot=!1,r({errMsg:"hideTabBarRedDot:ok"})):o({errMsg:"hideTabBarRedDot:fail tabbar item not found"})},this.showTabBarHandler=function(t){var a=t.successHandler;e.status=0,a({errMsg:"showTabBar:ok"})},this.hideTabBarHandler=function(t){var a=t.animation,r=t.successHandler;e.status=a?2:1,r({errMsg:"hideTabBar:ok"})};var a=this.conf.list,o=this.conf.customRoutes;if("[object Array]"!==Object.prototype.toString.call(a)||a.length<2||a.length>5)throw new Error("tabBar \u914d\u7f6e\u9519\u8bef");for(var b in this.homePage=d(this.homePage),o)this.customRoutes.push([b,o[b]]);a.forEach((function(t){0!==t.pagePath.indexOf("/")&&(t.pagePath="/"+t.pagePath)})),this.list=a,this.onLongPress=Object(r.d)(this,"longpress",7)}return t.prototype.getCurrentUrl=function(){var t,e=this.conf.mode,a=this.conf.basename||"/";if("hash"===e){var r=window.location.href,o=r.indexOf("#");t=-1===o?"":r.substring(o+1)}else t=location.pathname;var n=d(h(t,a));return"/"===n?this.homePage:n},t.prototype.bindEvent=function(){l.eventCenter.on("__taroRouterChange",this.routerChangeHandler),l.eventCenter.on("__taroSwitchTab",this.switchTabHandler),l.eventCenter.on("__taroSetTabBarBadge",this.setTabBarBadgeHandler),l.eventCenter.on("__taroRemoveTabBarBadge",this.removeTabBarBadgeHandler),l.eventCenter.on("__taroShowTabBarRedDotHandler",this.showTabBarRedDotHandler),l.eventCenter.on("__taroHideTabBarRedDotHandler",this.hideTabBarRedDotHandler),l.eventCenter.on("__taroShowTabBar",this.showTabBarHandler),l.eventCenter.on("__taroHideTabBar",this.hideTabBarHandler)},t.prototype.removeEvent=function(){l.eventCenter.off("__taroRouterChange",this.routerChangeHandler),l.eventCenter.off("__taroSwitchTab",this.switchTabHandler),l.eventCenter.off("__taroSetTabBarBadge",this.setTabBarBadgeHandler),l.eventCenter.off("__taroRemoveTabBarBadge",this.removeTabBarBadgeHandler),l.eventCenter.off("__taroShowTabBarRedDotHandler",this.showTabBarRedDotHandler),l.eventCenter.off("__taroHideTabBarRedDotHandler",this.hideTabBarRedDotHandler),l.eventCenter.off("__taroShowTabBarHandler",this.showTabBarHandler),l.eventCenter.off("__taroHideTabBarHandler",this.hideTabBarHandler)},t.prototype.componentDidLoad=function(){this.tabbarPos=this.tabbar.nextElementSibling?"top":"bottom",this.bindEvent(),this.routerChangeHandler()},t.prototype.componentDidUnload=function(){this.removeEvent()},t.prototype.render=function(){var t,e,a=this,n=this.conf,i=this.tabbarPos,s=void 0===i?"bottom":i,l=this.status,d=Object(o.a)("weui-tabbar",((t={})["taro-tabbar__border-"+(n.borderStyle||"black")]=!0,t)),h=-1===this.selectedIndex||1===l,c=2===l;return Object(r.f)(r.a,{class:Object(o.a)("taro-tabbar__tabbar","taro-tabbar__tabbar-"+s,(e={},e["taro-tabbar__tabbar-hide"]=h,e["taro-tabbar__tabbar-slideout"]=c,e))},Object(r.f)("div",{class:d,style:{backgroundColor:n.backgroundColor||""}},this.list.map((function(t,e){var o,i,s=a.selectedIndex===e;return s?(o=n.selectedColor,i=t.selectedIconPath):(o=n.color||"",i=t.iconPath),Object(r.f)(b,{index:e,onSelect:a.switchTab.bind(a),isSelected:s,textColor:o,iconPath:i,text:t.text,badgeText:t.badgeText,showRedDot:t.showRedDot})}))))},Object.defineProperty(t.prototype,"tabbar",{get:function(){return Object(r.e)(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"#app,body,html{height:100%}.taro-tabbar__border-white:before{border-top-color:#fff!important}.taro-tabbar__container{display:-ms-flexbox;display:flex;height:100%;-ms-flex-direction:column;flex-direction:column;overflow:hidden}.taro-tabbar__panel{-ms-flex:1;flex:1;position:relative;overflow:auto;-webkit-overflow-scrolling:touch}.taro-tabbar__tabbar{position:relative;height:50px;width:100%;-webkit-transition:bottom .2s,top .2s;transition:bottom .2s,top .2s}.taro-tabbar__tabbar-top{top:0}.taro-tabbar__tabbar-bottom{bottom:0}.taro-tabbar__tabbar-hide{display:none}.taro-tabbar__tabbar-slideout{top:-52px;-ms-flex:0 0;flex:0 0}.taro-tabbar__panel+.taro-tabbar__tabbar-slideout{top:auto;bottom:-52px}"},enumerable:!0,configurable:!0}),t}()},516:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var r=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){!function(){var e={}.hasOwnProperty;function a(){for(var t=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var n=typeof o;if("string"===n||"number"===n)t.push(o);else if(Array.isArray(o)&&o.length){var i=a.apply(null,o);i&&t.push(i)}else if("object"===n)for(var s in o)e.call(o,s)&&o[s]&&t.push(s)}}return t.join(" ")}t.exports?(a.default=a,t.exports=a):window.classNames=a}()}))}}]);