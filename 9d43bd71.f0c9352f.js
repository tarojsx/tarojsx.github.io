(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{667:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return s}));var a=n(1),c=n(21),l=(n(0),n(732)),r={id:"2020-06-25-what-is-react",title:"\u4ec0\u4e48\u662f React\uff1f",author:"Colder",author_url:"https://github.com/cncolder",author_image_url:"https://avatars1.githubusercontent.com/u/127009",tags:["React","JavaScript"]},o={permalink:"/blog/2020-06-25-what-is-react",source:"@site/blog/2020-06-25-what-is-react.mdx",description:"React",date:"2020-06-25T00:00:00.000Z",tags:[{label:"React",permalink:"/blog/tags/react"},{label:"JavaScript",permalink:"/blog/tags/java-script"}],title:"\u4ec0\u4e48\u662f React\uff1f",readingTime:6.69,truncated:!0,nextItem:{title:"React \u65f6\u95f4\u7b80\u53f2",permalink:"/blog/2020-06-24-react-on-a-timeline"}},b=[{value:"\u7d22\u5f15",id:"\u7d22\u5f15",children:[]},{value:"React \u57fa\u672c\u7d20\u517b",id:"react-\u57fa\u672c\u7d20\u517b",children:[{value:"\u521d\u4ee3 React \u5bf9\u8c61\u7ec4\u4ef6",id:"\u521d\u4ee3-react-\u5bf9\u8c61\u7ec4\u4ef6",children:[]},{value:"\u4e8c\u4ee3 React \u7c7b\u7ec4\u4ef6",id:"\u4e8c\u4ee3-react-\u7c7b\u7ec4\u4ef6",children:[]}]},{value:"\u73b0\u4ee3 React \u51fd\u6570\u5f0f\u7ec4\u4ef6",id:"\u73b0\u4ee3-react-\u51fd\u6570\u5f0f\u7ec4\u4ef6",children:[{value:"\u53d8\u91cf\u4fdd\u6301",id:"\u53d8\u91cf\u4fdd\u6301",children:[]},{value:"\u72b6\u6001\u4fdd\u6301",id:"\u72b6\u6001\u4fdd\u6301",children:[]},{value:"\u751f\u547d\u5468\u671f",id:"\u751f\u547d\u5468\u671f",children:[]}]},{value:"React Hooks \u7684\u610f\u4e49",id:"react-hooks-\u7684\u610f\u4e49",children:[]},{value:"\u4ec0\u4e48\u662f React\uff1f",id:"\u4ec0\u4e48\u662f-react\uff1f",children:[]}],i={rightToc:b};function s(e){var t=e.components,n=Object(c.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},i,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,Object(l.b)("img",Object(a.a)({parentName:"p"},{src:"/img/undraw_react.svg",alt:"React"}))),Object(l.b)("p",null,"\u65f6\u81f3\u4eca\u65e5\uff0cReact \u5982\u65e5\u4e2d\u5929\uff0c\u5982\u679c\u6709\u4eba\u95ee\u201c\u4ec0\u4e48\u662f React\uff1f\u201d\uff0c\u591a\u534a\u4f1a\u88ab\u5632\u8bbd\u65e0\u77e5\u3002"),Object(l.b)("p",null,"\u4f46\u662f\u5982\u679c\u80fd\u5750\u4e0b\u6765\u51b7\u9759\u7684\u601d\u8003\u4e00\u4e0b\uff0c\u4ec0\u4e48\u662f React\uff1f\u4e3a\u4ec0\u4e48\u662f React\uff1f"),Object(l.b)("h2",{id:"\u7d22\u5f15"},"\u7d22\u5f15"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"./2020-06-24-react-on-a-timeline"}),"React \u65f6\u95f4\u7b80\u53f2")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"\u4ec0\u4e48\u662f React\uff1f"))),Object(l.b)("h2",{id:"react-\u57fa\u672c\u7d20\u517b"},"React \u57fa\u672c\u7d20\u517b"),Object(l.b)("p",null,Object(l.b)("img",Object(a.a)({parentName:"p"},{src:"/img/undraw_user_flow.svg",alt:"Models and Views"}))),Object(l.b)("p",null,"\u4eba\u673a\u4ea4\u4e92\u754c\u9762\uff08UI\uff09\u672c\u8d28\u4e0a\u662f\u628a\u6570\u636e\u4ee5\u7528\u6237\u80fd\u591f\u7406\u89e3\u7684\u65b9\u5f0f\u5c55\u73b0\u51fa\u6765\uff0c\u540c\u65f6\u5bf9\u4ea4\u4e92\u4f5c\u51fa\u54cd\u5e94\u3002\u8fd9\u91cc\u7684\u4ea4\u4e92\u53ef\u4ee5\u6765\u81ea\u4e8e\u7528\u6237\u70b9\u51fb\u3001\u9ea6\u514b\u98ce\u3001\u52a0\u901f\u8ba1\u751a\u81f3\u662f\u773c\u795e\u7b49\uff0c\u4e5f\u53ef\u4ee5\u662f\u65f6\u95f4\u3001\u7a7a\u95f4\u3001\u73af\u5883\u7684\u53d8\u5316\u3002"),Object(l.b)("p",null,"React \u53ea\u8981\u505a\u597d\u4e24\u4ef6\u4e8b\uff1a"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"\u4f7f\u7528\u7ec4\u4ef6\u63cf\u8ff0\u6570\u636e\u662f\u5982\u4f55\u53d8\u6210\u754c\u9762\u7684\u3002"),Object(l.b)("li",{parentName:"ol"},"\u5411\u5f00\u53d1\u8005\u66b4\u9732\u4fee\u6539\u6570\u636e\u7684\u63a5\u53e3\u3002")),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"Component = (Data) => <View />")),Object(l.b)("p",null,"\u7ec4\u4ef6\u901a\u8fc7\u7ec4\u5408\uff0c\u4ee5\u53ca\u6570\u636e\u7684\u4f20\u9012\uff0c\u6784\u6210\u4e86 App \u7684\u57fa\u672c\u8981\u7d20\u3002"),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u90a3\u4e48\u7ec4\u4ef6\u8981\u5982\u4f55\u201c\u6b63\u786e\u201d\u7684\u63cf\u8ff0\u6570\u636e\u4e0e\u754c\u9762\u4e4b\u95f4\u7684\u5173\u7cfb\u5462\uff1f")),Object(l.b)("p",null,"\u8ba9\u6211\u4eec\u6765\u56de\u987e\u4e00\u4e0b React \u521b\u5efa\u7ec4\u4ef6\u7684\u5386\u53f2\u3002"),Object(l.b)("h3",{id:"\u521d\u4ee3-react-\u5bf9\u8c61\u7ec4\u4ef6"},"\u521d\u4ee3 React \u5bf9\u8c61\u7ec4\u4ef6"),Object(l.b)("p",null,"\u6700\u521d\u7684 React \u7ec4\u4ef6\u662f\u901a\u8fc7\u5411 ",Object(l.b)("inlineCode",{parentName:"p"},"React.createClass")," \u65b9\u6cd5\u4f20\u9012\u4e00\u4e2a\u7ec4\u4ef6\u201c\u914d\u7f6e\u201d\u6e05\u5355\u6765\u521b\u5efa\u7ec4\u4ef6\u7684\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u521d\u4ee3 React \u5bf9\u8c61\u7ec4\u4ef6"',title:'"\u521d\u4ee3',React:!0,'\u5bf9\u8c61\u7ec4\u4ef6"':!0}),"var MyMixin = {\n    extraMethod: function() {},\n}\nvar Demo = React.createClass({\n    // \u521d\u59cb state\n    getInitialState: function() {\n        return {\n            counter: this.props.initialCounter || 0,\n        }\n    },\n    componentDidMount: function() {\n        console.log('mounted')\n    },\n    handleClick: function() {\n        this.setState(this.state.counter + 1)\n    },\n    // \u6e32\u67d3\u51fd\u6570\n    render: function() {\n        return <div onClick={this.handleClick}>\u70b9\u51fb\u8ba1\u6570\uff1a{this.state.counter}</div>\n    },\n    // \u6df7\u5408\u590d\u7528\u903b\u8f91\n    mixins: [MyMixin],\n})\n")),Object(l.b)("p",null,"\u770b\u8d77\u6765\u6709\u70b9\u50cf Vue \u6216\u5c0f\u7a0b\u5e8f\uff0c\u6ca1\u9519\u8fd9\u5c31\u662f React \u8d70\u8fc7\u7684\u5f2f\u8def\uff0c\u5374\u5bf9\u5176\u4ed6\u6846\u67b6\u7684\u53d1\u5c55\u4ea7\u751f\u6df1\u8fdc\u5f71\u54cd\u3002"),Object(l.b)("p",null,"\u5728\u521d\u4ee3 React \u7ec4\u4ef6\u91cc\uff0c\u5df2\u7ecf\u80fd\u770b\u5230\u4e00\u4e2a\u7ec4\u4ef6\u7684\u57fa\u672c\u8981\u7d20\uff1a\u5c5e\u6027\u3001\u72b6\u6001\u3001\u6e32\u67d3\u3001\u56de\u8c03\u4ee5\u53ca\u751f\u547d\u5468\u671f\u3002\u4e00\u4e2a\u7ec4\u4ef6\u4f1a\u628a\u5c5e\u6027\u548c\u72b6\u6001\u5f53\u6210\u6570\u636e\u6e90\uff0c\u901a\u8fc7\u6e32\u67d3\u51fd\u6570\u751f\u6210\u754c\u9762\uff0c\u4e4b\u540e\u76d1\u542c\u4e8b\u4ef6\u548c\u751f\u547d\u5468\u671f\u8fdb\u5165\u4e0b\u4e00\u4e2a\u6e32\u67d3\u5468\u671f\uff0c\u5468\u800c\u590d\u59cb\u7684\u628a\u751f\u6210\u7684\u754c\u9762\u8f93\u51fa\u7ed9 React\uff0c\u7531 React \u7ec4\u5408\u8d77\u6765\u6700\u7ec8\u4ea4\u7531 ReactDOM \u8f93\u51fa\u7ed9\u6d4f\u89c8\u5668\u3002"),Object(l.b)("p",null,"\u6ce8\u610f\u8fd9\u4e2a\u7279\u522b\u7684 ",Object(l.b)("inlineCode",{parentName:"p"},"mixins")," \u5b57\u6bb5\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u628a\u53e6\u4e00\u4e2a\u5bf9\u8c61\u548c\u5f53\u524d\u7684\u914d\u7f6e\u5408\u5e76\uff0c\u4e4b\u6240\u4ee5\u4f1a\u51fa\u73b0\u8fd9\u6837\u7684\u8bbe\u8ba1\uff0c\u662f\u56e0\u4e3a\u5f53\u5e74\u8fd8\u6ca1\u6709\u5bf9\u8c61\u5c55\u5f00\u8bed\u6cd5 ",Object(l.b)("inlineCode",{parentName:"p"},"{ ...mixins }"),"\uff0c",Object(l.b)("inlineCode",{parentName:"p"},"Object.assign")," \u53c8\u592a\u4e11\u4e86\u3002\u503c\u5f97\u4e00\u63d0\u7684\u662f\u8fd9\u79cd\u5199\u6cd5\u6bcf\u4e2a\u65b9\u6cd5\u91cc\u7684 ",Object(l.b)("inlineCode",{parentName:"p"},"this")," \u90fd\u80fd\u6b63\u786e\u6307\u5411\u5f53\u524d\u7ec4\u4ef6\uff0c\u5305\u62ec ",Object(l.b)("inlineCode",{parentName:"p"},"mixins")," \u91cc\u7684\u65b9\u6cd5\uff0c\u8fd9\u53c8\u4f55\u5c1d\u4e0d\u662f\u4e00\u79cd\u4f18\u52bf\u554a\u3002"),Object(l.b)("p",null,"\u8fd9\u6837\u7684\u5199\u6cd5\u4ece React 15.5.0 \u5f00\u59cb\u53cd\u5bf9\u4f7f\u7528\uff0c\u53cd\u5bf9\u7684\u7406\u7531\u5e76\u4e0d\u662f\u8fd9\u6837\u5199\u6709\u591a\u5927\u7684\u95ee\u9898\uff0c\u53ea\u662f\u56e0\u4e3a React \u8bde\u751f\u4e4b\u521d JavaScript \u8fd8\u6ca1\u6709\u6b63\u5f0f\u7684 class \u6807\u51c6\u3002JavaScript \u793e\u533a\u5bf9\u7ee7\u627f\u6709\u4e0d\u540c\u7684\u7406\u89e3\uff0c\u666e\u904d\u91c7\u7528",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain"}),"\u57fa\u4e8e\u539f\u578b\u94fe\u7684\u7ee7\u627f\u65b9\u5f0f"),"\uff0c\u8fd9\u662f\u5f88\u591a\u6a21\u5757\u4f5c\u8005\u5fc5\u987b\u638c\u63e1\u7684\u4e00\u9879\u6280\u80fd\uff0c\u5199\u6cd5\u591a\u6837\uff0c\u96be\u4ee5\u638c\u63e1\uff0c\u5728\u5927\u90e8\u5206\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u91cc\u4e00\u652f\u72ec\u79c0\uff0c\u4e8e\u662f React \u8bf4\uff1a\u201c\u9648\u72ec\u79c0\u4f60\u5750\u4e0b\uff01\u201d\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:'title="\u5f53\u5e74\u4eba\u4eec\u773c\u4e2d\u7684 JavaScript \u7c7b"',title:'"\u5f53\u5e74\u4eba\u4eec\u773c\u4e2d\u7684',JavaScript:!0,'\u7c7b"':!0}),"function Foo() {\n    this.a = 1\n}\n// \u5047\u88c5\u6211\u662f\u4e2a\u7c7b\nlet obj = new Foo()\n")),Object(l.b)("h3",{id:"\u4e8c\u4ee3-react-\u7c7b\u7ec4\u4ef6"},"\u4e8c\u4ee3 React \u7c7b\u7ec4\u4ef6"),Object(l.b)("p",null,"\u968f\u7740 ES2015 \u8349\u6848\u6572\u5b9a\uff0cJavaScript \u7ec8\u4e8e\u62e5\u6709\u4e86\u5b98\u65b9\u8ba4\u53ef\u7684 class\uff0c\u867d\u7136\u6b64\u65f6\u8fd8\u662f\u9700\u8981\u901a\u8fc7 Babel \u628a class \u7f16\u8bd1\u6210\u539f\u578b\u94fe\u7ee7\u627f\u4ee3\u7801\uff0c\u4f46\u5bf9\u7528\u6237\u6765\u8bf4\u8fd9\u4e00\u8fc7\u7a0b\u662f\u900f\u660e\u7684\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u4e8c\u4ee3 React \u7c7b\u7ec4\u4ef6"',title:'"\u4e8c\u4ee3',React:!0,'\u7c7b\u7ec4\u4ef6"':!0}),"class Demo extends React.Component {\n    constructor(props) {\n        this.state = {\n            counter: props.initialCounter || 0,\n        }\n    }\n    componentDidMount() {\n        console.log('mounted')\n    }\n    handleClick = () => {\n        this.setState(this.state.counter + 1)\n    }\n    render() {\n        return <div onClick={this.handleClick}>\u70b9\u51fb\u8ba1\u6570\uff1a{this.state.counter}</div>\n    }\n}\n")),Object(l.b)("p",null,"\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u7ee7\u627f\u81ea\u7236\u7c7b ",Object(l.b)("inlineCode",{parentName:"p"},"React.Component"),"\uff0c\u72b6\u6001\u53d8\u6210\u7c7b\u7684\u5b57\u6bb5\uff0c\u4e8b\u4ef6\u548c\u751f\u547d\u5468\u671f\u53d8\u6210\u7c7b\u7684\u65b9\u6cd5\uff0c\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u51e0\u5341\u5e74\u7684\u6700\u4f73\u5b9e\u8df5\u90fd\u642c\u8fc7\u6765\uff0c\u51e0\u5341\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u4e5f\u5957\u8fc7\u6765\uff0c\u4e00\u5207\u770b\u8d77\u6765\u90fd\u662f\u90a3\u4e48\u7f8e\u597d\u3002"),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"\u8001\u677f\u8ba9\u6211\u8fd9\u4e2a\u540e\u7aef Java \u5199 React\uff0c\u56e0\u4e3a\u4ed6\u89c9\u5f97\u8fd9\u4e24\u4e2a\u4e1c\u897f\u770b\u8d77\u6765\u5f88\u50cf\u3002")),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u679c\u771f\u5982\u6b64\u5417\uff1f")),Object(l.b)("p",null,"\u8fd8\u8bb0\u5f97\u521d\u4ee3\u7ec4\u4ef6\u91cc\u7684 ",Object(l.b)("inlineCode",{parentName:"p"},"mixins")," \u5417\uff1f\u5982\u679c\u8981\u590d\u7528\u903b\u8f91\uff0c\u6211\u8be5\u5982\u4f55 mixin \u5230\u7c7b\u7ec4\u4ef6\u91cc\u5462\uff1f\u6216\u8bb8\u4f60\u9996\u5148\u60f3\u5230\u7684\u662f\u7ee7\u627f\uff0c\u6ca1\u9519\uff0c\u786e\u5b9e\u6709\u4eba\u8fd9\u6837\u505a\uff0c\u4f8b\u5982 ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/NervJS/taro-ui/blob/b792ac594f33255f2f6f207a890183c6b21b9e06/packages/taro-ui/src/common/component.tsx#L17"}),"Taro UI \u7684 AtComponent"),"\u3002\u53ef\u662f ",Object(l.b)("inlineCode",{parentName:"p"},"mixins")," \u7684\u503c\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u6709\u9009\u62e9\u7684\u590d\u7528\u51e0\u5957\u903b\u8f91\uff0cJavaScript \u53ef\u4e0d\u8bb8\u7ee7\u627f\u591a\u4e2a\u7236\u7c7b\uff0cJava \u4e5f\u4e0d\u80fd\uff0cC++ \u53ef\u4ee5\uff08\u641e\u4e0d\u61c2\u6709\u591a\u4e2a\u7238\u7238\u662f\u4ec0\u4e48\u611f\u89c9\uff09\u3002"),Object(l.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(l.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"\u8fd9\u91cc\u63d0\u53ca mixins \u5e76\u4e0d\u662f\u5728\u5217\u4e3e\u5b83\u7684\u597d\u5904\uff0c\u5b9e\u9645\u4e0a\u5b98\u65b9\u65e9\u5df2\u5217\u4e3e\u4e86 ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://zh-hans.reactjs.org/blog/2016/07/13/mixins-considered-harmful.html"}),"mixins \u7684\u79cd\u79cd\u7f6a\u72b6"),"\u4e86\u3002"))),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u53ef\u6211\u8be5\u600e\u4e48\u590d\u7528\u903b\u8f91\u5462\uff1f")),Object(l.b)("p",null,"\u5b98\u65b9\u7ed9\u51fa\u7684\u7b54\u6848\u662f HOC\uff08\u9ad8\u9636\u7ec4\u4ef6\uff09\uff0c\u9ad8\u9636\u7ec4\u4ef6\u662f\u53c2\u6570\u4e3a\u7ec4\u4ef6\uff0c\u8fd4\u56de\u503c\u4e3a\u65b0\u7ec4\u4ef6\u7684\u51fd\u6570\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u9ad8\u9636\u7ec4\u4ef6 \u6253\u5370\u751f\u547d\u5468\u671f"',title:'"\u9ad8\u9636\u7ec4\u4ef6','\u6253\u5370\u751f\u547d\u5468\u671f"':!0}),"function withLogger(WrappedComponent) {\n    return class extends React.Component {\n        componentDidMount() {\n            console.log('mounted')\n        }\n        componentDidUpdate() {\n            console.log('updated')\n        }\n        componentWillUnmount() {\n            console.log('unmounted')\n        }\n        render() {\n            return <WrappedComponent {...this.props} />\n        }\n    }\n}\n")),Object(l.b)("p",null,"\u5514\uff5e \u6211\u60f3\u590d\u7528\u903b\u8f91\uff0c\u7ed3\u679c\u73b0\u5728\u6211\u6709\u4e24\u4e2a\u7ec4\u4ef6\u4e86\u3002\u6bcf\u591a\u4e00\u6b21\u590d\u7528\uff0c\u5c31\u8981\u518d\u5305\u4e00\u5c42\uff0c\u6211\u81ea\u5df1\u7684\u7ec4\u4ef6\u5c31\u8fd9\u6837\u88ab\u5305\u6210\u4e86\u7cbd\u5b50\u3002",Object(l.b)("em",{parentName:"p"},"\u7aef\u5348\u8282\u5feb\u4e50\uff01")," \u751a\u81f3\u8fd8\u6709\u4e00\u79cd\u5e2e\u4f60\u5305\u7cbd\u5b50\u7684\u5de5\u5177\u51fd\u6570 ",Object(l.b)("inlineCode",{parentName:"p"},"compose"),"\uff0c\u4f8b\u5982 ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://lodash.com/docs/#flowRight"}),Object(l.b)("inlineCode",{parentName:"a"},"lodash.flowRight")),"\uff0c\u628a\u539f\u672c\u96be\u770b\u7684 ",Object(l.b)("inlineCode",{parentName:"p"},"C(B(A(Comp)))")," \u6539\u5199\u6210 ",Object(l.b)("inlineCode",{parentName:"p"},"compose(A, B, C)(Comp)"),"\u3002\u628a\u201c\u9ad8\u9636\u201d\u73a9\u51fa\u82b1\u6837\u7684\u8981\u6570 ",Object(l.b)("inlineCode",{parentName:"p"},"Redux"),"\uff0c\u5b83\u7684 ",Object(l.b)("inlineCode",{parentName:"p"},"connect")," \u51fd\u6570\u662f\u4e00\u4e2a\u8fd4\u56de\u9ad8\u9636\u7ec4\u4ef6\u7684\u9ad8\u9636\u51fd\u6570\uff01"),Object(l.b)("p",null,"\u8fd9\u8fd8\u4e0d\u7b97\u5b8c\uff0c\u56e0\u4e3a\u9ad8\u9636\u7ec4\u4ef6\u4e5f\u662f\u7ec4\u4ef6\uff0c\u6700\u597d\u6307\u5b9a\u540d\u79f0 (displayName)\uff0c\u5426\u5219\u5728 ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/facebook/react-devtools"}),"React Developer Tools")," \u91cc\u65e0\u6cd5\u533a\u5206\u3002\u5c31\u597d\u50cf\u5149\u770b\u5916\u76ae\u4f60\u5206\u4e0d\u6e05\u7cbd\u5b50\u662f\u4ec0\u4e48\u9985\u7684\u3002\u5982\u679c\u539f\u7ec4\u4ef6\u6709\u9759\u6001\u65b9\u6cd5\uff0c\u9ad8\u9636\u7ec4\u4ef6\u8981\u4e00\u5e76\u590d\u5236\u8fc7\u6765\uff0c\u5426\u5219\u4f60\u7684\u884c\u4e3a\u548c\u5185\u90e8\u7ec4\u4ef6\u4e0d\u7b26\uff0c\u5c31\u9732\u9985\u4e86\u3002"),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"\u8fd8\u80fd\u4e0d\u80fd Happy coding \u5566\uff1f")),Object(l.b)("p",null,"\u793e\u533a\u7a0d\u5019\u7ed9\u51fa\u53e6\u4e00\u4e2a\u7b54\u6848 Render Props\uff0c\u672f\u8bed \u201crender prop\u201d \u662f\u6307\u4e00\u79cd\u5728 React \u7ec4\u4ef6\u4e4b\u95f4\u4f7f\u7528\u4e00\u4e2a\u503c\u4e3a\u51fd\u6570\u7684 prop \u5171\u4eab\u4ee3\u7801\u7684\u7b80\u5355\u6280\u672f\u3002"),Object(l.b)("p",null,"\u65e2\u7136\u4f2a\u88c5\u4e00\u4e2a\u7ec4\u4ef6\u8fd9\u4e48\u9ebb\u70e6\uff0c\u7d22\u6027\u6765\u660e\u7684\u5427\uff0c\u6211\u628a\u6570\u636e\u4f20\u7ed9\u4f60\uff0c\u600e\u4e48\u7528\u662f\u4f60\u7684\u4e8b\u60c5\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="Render Props \u5207\u6362\u503c"',title:'"Render',Props:!0,'\u5207\u6362\u503c"':!0}),"class Toggle extends React.Component {\n    state = { value: false }\n    toggle = () => {\n        this.setState(!this.state.value)\n    }\n    render() {\n        return this.props.children({ ...this.state, toggle: this.toggle })\n    }\n}\nclass Demo extends React.Component {\n    render() {\n        return (\n            <Toggle>\n                {({ value, toggle }) => {\n                    return <div onClick={toggle}>\u5f53\u524d\u72b6\u6001\uff1a{value ? '\u5f00' : '\u5173'}</div>\n                }}\n            </Toggle>\n        )\n    }\n}\n")),Object(l.b)("p",null,"\u8fd9\u79cd\u505a\u6cd5\u6bd4 HOC \u597d\u90a3\u4e48\u4e00\u70b9\uff0c\u4f46\u5bf9\u4f7f\u7528\u8005\u4e0d\u518d\u900f\u660e\uff0c\u4f60\u5fc5\u987b\u663e\u793a\u7684\u201c\u63a5\u6536\u201d\u8fd9\u4e9b\u4f20\u5165\u7684\u503c\uff0c\u518d\u7ee7\u7eed\u5411\u4e0b\u4f20\u9012\u3002\u90a3\u4e00\u5929\uff0c\u4eba\u7c7b\u7ec8\u4e8e\u56de\u60f3\u8d77\u4e86\u66fe\u4e00\u5ea6\u88ab ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"http://callbackhell.com"}),"\u56de\u8c03\u5730\u72f1")," \u6240\u652f\u914d\u7684\u6050\u6016\u3002\u8fdb\u800c\u50ac\u751f\u51fa ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/pedronauck/react-adopt"}),"react-adopt")," \u8fd9\u4e2a\u9879\u76ee\uff0c\u50cf ",Object(l.b)("inlineCode",{parentName:"p"},"compose")," \u7ec4\u5408 HOC \u4e00\u6837\u53bb\u7ec4\u5408 Render Props\u3002\u3002\u3002"),Object(l.b)("p",null,Object(l.b)("img",Object(a.a)({parentName:"p"},{src:"/img/render-props-everywhere.jpeg",alt:"Render Props"}))),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"\u903b\u8f91\u590d\u7528\u662f React class \u7ec4\u4ef6\u6c38\u8fdc\u7684\u75db\u3002")),Object(l.b)("h2",{id:"\u73b0\u4ee3-react-\u51fd\u6570\u5f0f\u7ec4\u4ef6"},"\u73b0\u4ee3 React \u51fd\u6570\u5f0f\u7ec4\u4ef6"),Object(l.b)("div",{className:"admonition admonition-important alert alert--info"},Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"\u672c\u8282\u4ee3\u7801\u4e0d\u4fdd\u8bc1\u6b63\u5e38\u8fd0\u884c\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u8bf4\u660e\u539f\u7406\u3002"))),Object(l.b)("p",null,"React \u66fe\u7ecf\u5728\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u91cc\u628a\u51fd\u6570\u5199\u6210\u7684\u7ec4\u4ef6\u53eb\u505a\u201c\u65e0\u72b6\u6001\u7ec4\u4ef6 (StatelessComponent \u6216 SFC)\u201d\uff0c\u539f\u56e0\u4e0d\u8a00\u81ea\u660e\uff0c\u56e0\u4e3a\u6ca1\u6709\u72b6\u6001\uff0c\u4e0d\u662f\u4e0d\u60f3\uff0c\u662f",Object(l.b)("strong",{parentName:"p"},"\u4e0d\u80fd"),"\u3002\u8111\u8865\u201c\u81e3\u59be\u505a\u4e0d\u5230\u54c7\u201d\u65f6\u7684\u8868\u60c5\u3002"),Object(l.b)("p",null,"\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u6700\u521d\u662f\u5982\u4f55\u7528\u51fd\u6570\u5199\u7ec4\u4ef6\u7684\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u65e0\u72b6\u6001\u7ec4\u4ef6"',title:'"\u65e0\u72b6\u6001\u7ec4\u4ef6"'}),"const FuncComp = ({ name }) => <div>{name}</div>\n")),Object(l.b)("p",null,"\u8fd9\u4e48\u7b80\u5355\u7684\u4e00\u884c\u4ee3\u7801\u7684\u7ec4\u4ef6\uff0c\u6211\u4eec\u5b9e\u5728\u4e0d\u80fd\u5bf9\u5b83\u5962\u6c42\u592a\u591a\uff0c\u6bd5\u7adf\u914d\u5408 ",Object(l.b)("inlineCode",{parentName:"p"},"React.memo(FuncComp)"),"\uff0c\u4f1a\u77ac\u95f4\u53d8\u6210\u6bd4 ",Object(l.b)("inlineCode",{parentName:"p"},"React.PureComponent")," \u8fd8\u7eaf\u7684\u7ec4\u4ef6\uff0c\u5c5e\u6027\u4e0d\u53d8\u65f6\u76f4\u63a5\u8df3\u8fc7\u6e32\u67d3\u3002"),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u6709\u4ec0\u4e48\u529e\u6cd5\u53ef\u4ee5\u8ba9\u51fd\u6570\u63d2\u4e0a\u7fc5\u8180\u5417\uff1f")),Object(l.b)("p",null,"\u63a5\u4e0b\u6765\u8ba9\u6211\u4eec\u4f9d\u6b21\u8d4b\u4e88\u5b83\u4e00\u4e9b\u8d85\u80fd\u529b\uff0c\u770b\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570\u662f\u5982\u4f55\u4e00\u6b65\u4e00\u6b65\u53d8\u6210\u706b\u7bad\u7684\u3002"),Object(l.b)("p",null,Object(l.b)("img",Object(a.a)({parentName:"p"},{src:"/img/undraw_maker_launch.svg",alt:"Rocket"}))),Object(l.b)("h3",{id:"\u53d8\u91cf\u4fdd\u6301"},"\u53d8\u91cf\u4fdd\u6301"),Object(l.b)("p",null,"\u7ec4\u4ef6\u7684\u4ef7\u503c\u5728\u4e8e\u53ef\u91cd\u7528\uff0cReact \u5728\u5904\u7406 class \u7ec4\u4ef6\u65f6\uff0c\u4f1a\u5728\u7ec4\u4ef6\u6811\u4e2d\u5bf9\u5e94\u4f4d\u7f6e\u521d\u59cb\u5316 class \u5b9e\u4f8b\uff0c\u9700\u8981\u65f6\u8c03\u7528\u7ec4\u4ef6\u7684 render \u65b9\u6cd5\u83b7\u53d6\u65b0\u7684\u754c\u9762\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u7c7b\u7ec4\u4ef6\u7528\u5c5e\u6027\u5b57\u6bb5\u63a5\u6536 ref"',title:'"\u7c7b\u7ec4\u4ef6\u7528\u5c5e\u6027\u5b57\u6bb5\u63a5\u6536','ref"':!0}),"class ClassComponent extends React.Component {\n    ref = React.createRef()\n    render() {\n        return <div ref={this.ref} />\n    }\n}\n")),Object(l.b)("p",null,"\u5982\u679c\u6362\u6210 function \u7ec4\u4ef6\uff0c\u51fd\u6570\u672c\u8eab\u626e\u6f14\u4e86 render \u65b9\u6cd5\uff0c\u51fd\u6570\u5185\u90e8\u7684\u5c40\u90e8\u53d8\u91cf\u5728\u51fd\u6570\u8fd0\u884c\u4e4b\u524d\u8fd8\u6ca1\u6709\u521d\u59cb\u5316\uff0c\u8fd0\u884c\u4e4b\u540e\u4f1a\u88ab\u56de\u6536\uff0c\u4e5f\u5c31\u662f\u8bf4 function \u53ea\u80fd\u901a\u8fc7\u53c2\u6570\u8c03\u6574\u8f93\u51fa\u7ed3\u679c\u3002"),Object(l.b)("p",null,"\u5982\u679c\u60f3\u8ba9\u51fd\u6570\u7ec4\u4ef6\u6ee1\u8db3\u6700\u57fa\u672c\u7684\u9700\u6c42\u201c\u53d8\u91cf\u4fdd\u6301\u201d\uff0c\u9700\u8981\u5728\u51fd\u6570\u5916\u90e8\u5b58\u653e\u53d8\u91cf\uff0c\u8fd9\u4e2a\u503c\u53d1\u751f\u53d8\u5316\u4e0d\u4f1a\u89e6\u53d1\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\uff0c\u56e0\u4e3a\u662f\u5f15\u7528\uff0c\u8bfb\u53d6\u5230\u7684\u503c\u6c38\u8fdc\u662f\u6700\u65b0\u7684\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u51fd\u6570\u7ec4\u4ef6\u5916\u90e8\u53d8\u91cf"',title:'"\u51fd\u6570\u7ec4\u4ef6\u5916\u90e8\u53d8\u91cf"'}),"const ref = { current: undefined }\nconst Fun = () => <div ref={ref} />\n")),Object(l.b)("p",null,"\u4f3c\u4e4e\u53ef\u884c\uff0c\u524d\u63d0\u662f Fun \u7ec4\u4ef6\u53ea\u7528\u4e00\u6b21\u3002\u9020\u706b\u7bad\u662f\u4e00\u4e2a\u6301\u7eed\u8fed\u4ee3\u7684\u8fc7\u7a0b\uff0c\u6211\u4eec\u5148\u4fdd\u7559\u8fd9\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:"live",live:!0}),"function Demo() {\n    // \u9006\u5411\u4eff\u5236 React.useRef 1.0\n    const refObj = { current: undefined }\n    function useRef(value) {\n        refObj.current = value\n        return refObj\n    }\n\n    const Fun = () => {\n        const ref = useRef(new Date().toString())\n        return <div>{ref.current}</div>\n    }\n\n    return <Fun />\n}\n")),Object(l.b)("h3",{id:"\u72b6\u6001\u4fdd\u6301"},"\u72b6\u6001\u4fdd\u6301"),Object(l.b)("p",null,"class \u7ec4\u4ef6\u7684\u53e6\u4e00\u4e2a\u80fd\u529b\u662f\u4fdd\u5b58\u7ec4\u4ef6\u7684\u5f53\u524d\u72b6\u6001\uff0c\u5e76\u4e14\u5728\u72b6\u6001\u53d1\u751f\u53d8\u5316\u540e\u66f4\u65b0\u7ec4\u4ef6\uff0c\u5f53\u7136\u6211\u4eec\u8981\u9075\u5b88 React \u7684\u7ea6\u5b9a\uff0c\u72b6\u6001\u5b57\u6bb5\u540d\u5fc5\u987b\u662f state\uff0c\u4fee\u6539\u72b6\u6001\u5fc5\u987b\u901a\u8fc7 ",Object(l.b)("inlineCode",{parentName:"p"},"this.setState"),"\uff0cReact \u4e5f\u4f1a\u4fe1\u5b88\u627f\u8bfa\uff0c\u505a\u597d\u7ec4\u4ef6\u66f4\u65b0\u5de5\u4f5c\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u7c7b\u7ec4\u4ef6\u5904\u7406 state \u7684\u65b9\u5f0f"',title:'"\u7c7b\u7ec4\u4ef6\u5904\u7406',state:!0,'\u7684\u65b9\u5f0f"':!0}),"class ClassComponent extends React.Component {\n    state = { value: 1 }\n    render() {\n        const { value } = this.state\n        return <div onClick={() => this.setState(value + 1)}>{value}</div>\n    }\n}\n")),Object(l.b)("p",null,"\u72b6\u6001\u4fdd\u6301\u53ef\u4ee5\u770b\u4f5c\u662f\u53d8\u91cf\u4fdd\u6301\u7684\u589e\u5f3a\u7248\uff0c\u540c\u6837\u9700\u8981\u5728\u51fd\u6570\u5916\u90e8\u5b58\u653e state \u503c\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u51fd\u6570\u7ec4\u4ef6\u5916\u90e8\u53d8\u91cf"',title:'"\u51fd\u6570\u7ec4\u4ef6\u5916\u90e8\u53d8\u91cf"'}),"let value = 1\nconst setValue = nextValue => {\n    value = nextValue\n}\nconst Fun = () => <div onClick={() => setValue(value + 1)}>{value}</div>\n")),Object(l.b)("p",null,"\u72b6\u6001\u53ef\u4ee5\u4fee\u6539\u4e86\uff0c\u4f46\u662f\u8fd8\u7f3a\u5c11\u4e00\u79cd\u66f4\u65b0\u7ec4\u4ef6\u7684\u624b\u6bb5\uff0c\u7ec4\u4ef6\u4e00\u822c\u662f\u88ab\u52a8\u66f4\u65b0\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u5148\u501f\u7528\u4e00\u4e0b React \u7684\u66f4\u65b0\u80fd\u529b\u3002"),Object(l.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(l.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"\u4e0b\u9762\u793a\u4f8b\u4e2d\u7684 caller \u662f\u51fd\u6570\u7684\u5e9f\u5f03\u5c5e\u6027\uff0c\u4e0d\u8981\u7528\u5728\u771f\u5b9e\u9879\u76ee\u4e0a\u3002"))),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:"live",live:!0}),"function Demo() {\n    // \u501f\u7528\u4e00\u4e0b React \u5f3a\u5236\u66f4\u65b0\u529f\u80fd\n    const todoUpdate = () => React.useReducer(b => !b)[1]\n\n    // \u9006\u5411\u4eff\u5236 React.useState 1.0\n    let state\n    function useState(initialState) {\n        // caller \u4ee3\u8868\u8c03\u7528\u8005\n        const { caller } = useState\n\n        if (!state) state = initialState\n        const setState = nextState => {\n            state = nextState\n            caller.__update__()\n        }\n\n        return [state, setState]\n    }\n\n    const Fun = () => {\n        Fun.__update__ = todoUpdate()\n\n        const [value, setValue] = useState(1)\n        return (\n            <button onClick={() => setValue(value + 1)} style={{ padding: 10, fontSize: 20 }}>\n                \u70b9\u51fb\u589e\u52a0\u503c\uff08\u771f\u7684\u53ef\u4ee5\u70b9\uff09\uff1a{value}\n            </button>\n        )\n    }\n\n    return <Fun />\n}\n")),Object(l.b)("h3",{id:"\u751f\u547d\u5468\u671f"},"\u751f\u547d\u5468\u671f"),Object(l.b)("p",null,"\u6240\u8c13\u751f\u547d\u5468\u671f\uff0c\u662f React \u5728\u6e32\u67d3\u8fc7\u7a0b\u4e2d\u4e0e\u7ec4\u4ef6\u4e4b\u95f4\u7684\u534f\u8c03\u8fc7\u7a0b\uff0c\u7ec4\u4ef6\u7684\u6e32\u67d3\u662f\u7528\u6237\u4ee3\u7801\u548c React \u4e4b\u95f4\u5f7c\u6b64\u914d\u5408\u7684\u7ed3\u679c\uff0c\u8fd9\u4e2d\u95f4\u4f1a\u53d1\u751f\u82e5\u5e72\u6b21\u63a7\u5236\u6743\u7684\u4ea4\u63a5\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u7c7b\u7ec4\u4ef6\u751f\u547d\u5468\u671f"',title:'"\u7c7b\u7ec4\u4ef6\u751f\u547d\u5468\u671f"'}),"class ClassComponent extends React.Component {\n    componentDidMount() {\n        console.log('mounted')\n    }\n    componentDidUpdate() {\n        console.log('updated')\n    }\n    render() {\n        return null\n    }\n}\n")),Object(l.b)("p",null,"\u51fd\u6570\u7ec4\u4ef6\u8981\u60f3\u5b9e\u73b0\u8fd9\u6837\u7684\u6548\u679c\uff0c\u9700\u8981\u4e00\u4e2a\u4f34\u968f\u7ec4\u4ef6\u6e32\u67d3\u7684\u51fd\u6570\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u51fd\u6570\u7ec4\u4ef6\u4f34\u751f\u51fd\u6570"',title:'"\u51fd\u6570\u7ec4\u4ef6\u4f34\u751f\u51fd\u6570"'}),"const onDidUpdate = callback => {\n    callback()\n}\nconst Fun = () => {\n    onDidUpdate(() => console.log('updated'))\n    return <div />\n}\n")),Object(l.b)("p",null,"\u8fd9\u4f3c\u4e4e\u6ca1\u4ec0\u4e48\u7528\uff0c",Object(l.b)("inlineCode",{parentName:"p"},"callback")," \u53ea\u662f\u6362\u4e86\u4e00\u4e2a\u5730\u65b9\u6267\u884c\uff0c\u548c\u76f4\u63a5\u5199\u5728\u7ec4\u4ef6\u91cc\u662f\u4e00\u6837\u7684\u6548\u679c\uff0c\u8ba9\u6211\u4eec\u6539\u9020\u4e00\u4e0b\u5bf9\u8fd0\u884c\u6761\u4ef6\u65bd\u52a0\u4e00\u4e9b\u9650\u5236\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="\u51fd\u6570\u7ec4\u4ef6\u4f34\u751f\u51fd\u6570\u53d7\u4f9d\u8d56\u503c\u63a7\u5236"',title:'"\u51fd\u6570\u7ec4\u4ef6\u4f34\u751f\u51fd\u6570\u53d7\u4f9d\u8d56\u503c\u63a7\u5236"'}),"let oldDeps = []\nconst useEffect = (callback, deps) => {\n    // \u6ca1\u6709\u4f9d\u8d56\u6216\u4f9d\u8d56\u53d1\u751f\u53d8\u5316\u65f6\u8c03\u7528\u56de\u8c03\u51fd\u6570\n    if (!deps || oldDeps ? !deps.every((d, i) => d === oldDeps[i]) : true) {\n        callback()\n        oldDeps = deps\n    }\n}\nconst Fun = () => {\n    useEffect(() => console.log('mounted'), [])\n    return <div />\n}\n")),Object(l.b)("p",null,"\u4e3a\u4e86\u6a21\u62df\u751f\u547d\u5468\u671f\uff0c\u6211\u4eec\u5728\u51fd\u6570\u7ec4\u4ef6\u91cc\u653e\u7f6e\u4e00\u4e2a useEffect \u51fd\u6570\uff0c\u5e76\u4e14\u6307\u5b9a\u53ea\u6709\u4f9d\u8d56\u503c\u53d1\u751f\u53d8\u5316\u65f6\u624d\u6267\u884c\u56de\u8c03\uff0c\u8fd9\u6837\u4e00\u4e2a\u6709\u6761\u4ef6\u6267\u884c\u7684 useEffect \u517c\u5177 componentDidMount \u548c componentDidUpdate \u7279\u8272\u3002"),Object(l.b)("p",null,"\u8ba9\u6211\u4eec\u628a useEffect \u548c\u4e0a\u4e00\u8282\u63d0\u5230\u7684 useState \u653e\u5728\u4e00\u8d77\u770b\u4e0b\u4f1a\u4ea7\u751f\u4ec0\u4e48\u6837\u7684\u6548\u679c\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:"live",live:!0}),"function Demo() {\n    // \u6253\u5370\u65e5\u5fd7\n    const log = msg => {\n        if (typeof document === 'undefined') return\n        const logger = document.getElementById('useEffectDemoLogger1')\n        if (logger) logger.innerText += '\\n' + msg\n    }\n\n    // \u501f\u7528\u4e00\u4e0b React \u5f3a\u5236\u66f4\u65b0\u529f\u80fd\n    const todoUpdate = () => React.useReducer(b => !b)[1]\n\n    // \u9006\u5411\u4eff\u5236 React.useState 1.0\n    let state\n    function useState(initialState) {\n        // caller \u4ee3\u8868\u8c03\u7528\u8005\n        const { caller } = useState\n\n        if (!state) state = initialState\n        const setState = nextState => {\n            state = nextState\n            caller.__update__()\n        }\n\n        return [state, setState]\n    }\n\n    // \u9006\u5411\u4eff\u5236 React.useEffect 1.0\n    let oldDeps\n    function useEffect(callback, deps) {\n        if (!deps || oldDeps ? !deps.every((d, i) => d === oldDeps[i]) : true) {\n            callback()\n            oldDeps = deps\n        }\n    }\n\n    const Fun = () => {\n        Fun.__update__ = todoUpdate()\n\n        // \u4fdd\u6301\u72b6\u6001 value\n        const [value, setValue] = useState(0)\n\n        // value \u53d8\u5316\u65f6\u6253\u5370\u65e5\u5fd7\n        useEffect(() => {\n            log('updated')\n        }, [value])\n\n        return (\n            // \u6309\u94ae\u5185\u663e\u793a\u5f53\u524d value\uff0c\u70b9\u51fb\u540e value + 1\n            <button onClick={() => setValue(value + 1)} style={{ padding: 10, fontSize: 20 }}>\n                \u70b9\u51fb\u66f4\u65b0\u7ec4\u4ef6\uff1a{value}\n            </button>\n        )\n    }\n\n    return (\n        <>\n            <Fun />\n            <div id=\"useEffectDemoLogger1\" />\n        </>\n    )\n}\n")),Object(l.b)("p",null,"\u4e00\u4e2a\u6bd4\u8f83\u7c97\u7cd9\u7684\u706b\u7bad\u9020\u597d\u4e86\uff0c\u6211\u70b9\u706b\u8bd5\u4e86\u51e0\u6b21\u90fd\u80fd\u53d1\u5c04\uff0c\u5e0c\u671b\u4f60\u70b9\u706b\u7684\u65f6\u5019\u522b\u51fa\u4ec0\u4e48\u610f\u5916\u3002"),Object(l.b)("p",null,"\u6216\u8bb8\u4f60\u89c9\u5f97\u8fd9\u8ddf\u771f\u6b63\u7684 React \u5dee\u8fdc\u4e86\uff0c\u8fd9\u4e9b\u7ec4\u4ef6\u548c useXXX \u51fd\u6570\u90fd\u662f\u5355\u4f8b\u7684\u3002\u6ca1\u9519\uff0c\u6211\u5728\u9020\u706b\u7bad\uff0c\u4e00\u6b21\u6027\u7684\u706b\u7bad\uff0c\u6211\u77e5\u9053\u9a6c\u65af\u514b\u7684\u706b\u7bad\u662f\u53ef\u56de\u6536\u7684\uff0c\u53ea\u8981\u6709\u65f6\u95f4\u7ee7\u7eed\u6df1\u5165\uff0c\u6211\u4eec\u7684\u706b\u7bad\u4e5f\u80fd\u5b9e\u73b0\u91cd\u590d\u5229\u7528\uff0c\u800c\u4e14\u662f\u4e09\u7ea7\u706b\u7bad\u5728\u56de\u6536\u7684\u8fc7\u7a0b\u4e2d\u5b9e\u73b0\u7a7a\u4e2d\u5bf9\u63a5\u6574\u4f53\u8fd4\u56de\u3002"),Object(l.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(l.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"\u4ee5\u4e0a\u4ecb\u7ecd\u7684\u662f React \u6700\u57fa\u7840\u7684 3 \u4e2a Hooks API\uff0c\u771f\u5b9e\u7684 API \u5e76\u4e0d\u5b8c\u5168\u662f\u8fd9\u6837\u8fd0\u4f5c\u7684\uff0c\u8fd9\u4e9b\u4f8b\u5b50\u53ea\u662f\u5411\u4f60\u5c55\u793a JavaScript \u7684\u53e6\u4e00\u9762\uff0c\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u9b45\u529b\uff0c\u5373\uff1a\u51fd\u6570\u662f\u4e00\u7b49\u516c\u6c11\u3002"))),Object(l.b)("h2",{id:"react-hooks-\u7684\u610f\u4e49"},"React Hooks \u7684\u610f\u4e49"),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},Object(l.b)("em",{parentName:"p"},"Hook")," \u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002")),Object(l.b)("p",null,"\u56de\u987e class \u7ec4\u4ef6\uff0c\u903b\u8f91\u590d\u7528\u662f class \u7ec4\u4ef6\u6c38\u8fdc\u7684\u75db\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u5355\u5355\u662f JavaScript \u4e2d\u7684 class\uff0c\u4e5f\u4e00\u76f4\u9971\u53d7\u975e\u8bae\uff0c\u539f\u56e0\u5f88\u7b80\u5355\uff0cclass \u8bde\u751f\u7684\u65f6\u95f4\u592a\u665a\uff0c\u8fd8\u53ea\u662f\u4e2a\u8941\u8913\u4e2d\u7684\u5a74\u513f\uff0c\u540c\u65f6\u5b83\u4e5f\u662f\u6807\u51c6\u59d4\u5458\u4f1a\u786c\u585e\u7ed9 JavaScript \u7684\u534a\u6210\u54c1\u3002JavaScript \u66fe\u7ecf\u81ea\u8be9\u662f",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"http://www.ruanyifeng.com/blog/2012/04/functional_programming.html"}),"\u51fd\u6570\u5f0f\u8bed\u8a00"),"\uff08\u867d\u7136\u771f\u6b63\u7684\u51fd\u6570\u5f0f\u8bed\u8a00\u8ba4\u4e3a\u5b83\u5e76\u4e0d\u7eaf\u7cb9\uff09\uff0c\u73b0\u5728\u6709\u4e86 class\uff0c\u5c31\u518d\u4e5f\u89e3\u91ca\u4e0d\u6e05\u4e86\u3002"),Object(l.b)("p",null,"React \u6279\u8bc4 JavaScript class \u6709\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\uff1a"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"\u96be\u4ee5\u7406\u89e3\u7684 ",Object(l.b)("inlineCode",{parentName:"li"},"this"),"\uff0c\u4e0e\u5176\u4ed6\u8bed\u8a00\u5b58\u5728\u5de8\u5927\u5dee\u5f02\u3002"),Object(l.b)("li",{parentName:"ol"},"\u6ca1\u6709\u7a33\u5b9a\u7684",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://babeljs.io/docs/en/babel-plugin-transform-class-properties"}),"\u8bed\u6cd5\u63d0\u6848"),"\u3002",Object(l.b)("em",{parentName:"li"},"\u4f60\u4eca\u5929\u5199\u7684\u4ee3\u7801\uff0c\u672a\u6765\u53ef\u80fd\u4f1a\u6709\u522b\u7684\u542b\u4e49\u3002")),Object(l.b)("li",{parentName:"ol"},"class \u7ec4\u4ef6\u4f1a\u65e0\u610f\u4e2d\u9f13\u52b1\u5f00\u53d1\u8005\u4f7f\u7528\u4e00\u4e9b\u8ba9\u4f18\u5316\u63aa\u65bd\u65e0\u6548\u7684\u65b9\u6848\u3002")),Object(l.b)("p",null,"React \u7ec4\u4ef6\u4e00\u76f4\u66f4\u50cf\u662f\u51fd\u6570\uff0c\u800c Hook \u5219\u62e5\u62b1\u4e86\u51fd\u6570\u3002"),Object(l.b)("p",null,"\u6bcf\u4e00\u4e2a Hook \u4ee3\u8868\u4e00\u5c0f\u5757\u201c\u903b\u8f91\u201d\uff0cHook \u53ef\u4ee5\u5305\u88c5\uff0c\u76f8\u5173\u7684 Hooks \u53ef\u4ee5\u7ec4\u5408\uff0c\u53ea\u8981\u5728\u5916\u9762\u518d\u5305\u88f9\u4e00\u5c42\u51fd\u6570\u5373\u53ef\uff0c\u903b\u8f91\u590d\u7528\u53d8\u5f97\u548c\u7ec4\u4ef6\u590d\u7528\u4e00\u6837\u81ea\u7136\u3002\u751a\u81f3\u5728\u7f16\u8f91\u5668\u91cc\u9009\u4e2d\u51e0\u884c Hooks \u70b9\u51fb\u91cd\u6784\u5c31\u80fd\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u81ea\u5b9a\u4e49 Hook\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:'title="\u6a21\u4eff componentDidMount componentDidUpdate"',title:'"\u6a21\u4eff',componentDidMount:!0,'componentDidUpdate"':!0}),"function useDidMount(fn) {\n    useEffect(() => {\n        fn()\n    }, [])\n}\nfunction useDidUpdate(fn) {\n    const first = useRef(true)\n    useEffect(() => {\n        if (first.current) {\n            first.current = false\n            return\n        }\n        fn()\n    }, [])\n}\n")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:'title="\u5b9e\u73b0\u6570\u636e\u52a0\u8f7d"',title:'"\u5b9e\u73b0\u6570\u636e\u52a0\u8f7d"'}),"function useFetch(url) {\n    const [loading, setLoading] = useState(false)\n    const result = useRef()\n    const error = useRef()\n\n    useEffect(() => {\n        setLoading(true)\n        fetch(url)\n            .then(res => {\n                result.current = res\n            })\n            .catch(err => {\n                error.current = err\n            })\n            .finally(() => setLoading(false))\n    }, [url])\n\n    return { loading, result: result.current, error: error.current }\n}\n")),Object(l.b)("p",null,"\u7c7b\u4f3c\u7684\u4f8b\u5b50\u4e0d\u80dc\u679a\u4e3e\uff0c\u8bf7\u53c2\u8003 ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/streamich/react-use"}),"react-use"),"\uff0c\u5b83\u7684\u6e90\u7801\u662f\u4f60\u63d0\u9ad8\u5bf9 Hooks \u8ba4\u77e5\u7684\u6377\u5f84\u3002"),Object(l.b)("h2",{id:"\u4ec0\u4e48\u662f-react\uff1f"},"\u4ec0\u4e48\u662f React\uff1f"),Object(l.b)("p",null,Object(l.b)("img",Object(a.a)({parentName:"p"},{src:"/img/undraw_react.svg",alt:"React"}))),Object(l.b)("p",null,"\u4e86\u89e3\u4e86 React \u7684\u53d1\u5c55\u8fc7\u7a0b\uff0c\u5206\u6790\u4e86 React \u6781\u529b\u63a8\u8350\u7684 Hooks API\uff0c\u8ba9\u6211\u4eec\u56de\u5230\u6700\u521d\u7684\u95ee\u9898\uff1a",Object(l.b)("strong",{parentName:"p"},"\u201c\u4ec0\u4e48\u662f React\uff1f\u201d")),Object(l.b)("p",null,"\u4e3b\u6d41\u7684\u524d\u7aef\u6846\u67b6\u628a\u5c4f\u5e55\u5f53\u6210\u7535\u5b50\u7eb8\uff0c\u53ef\u4ee5\u53cd\u590d\u91cd\u7ed8\u3002\u4e4b\u524d\u7684\u524d\u7aef\u6846\u67b6\u5219\u8bef\u4ee5\u4e3a\u5c4f\u5e55\u662f\u4e00\u5757\u753b\u5e03\uff0c\u4e00\u624b\u62ff\u7740\u753b\u7b14\uff0c\u4e00\u624b\u62ff\u7740\u6d82\u6539\u6db2\u3002"),Object(l.b)("p",null,"\u56de\u5230\u8fd9\u4e2a\u7ecf\u5178\u7684\u516c\u5f0f\uff1a"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"Component = (Data) => <View />")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Component \u91cd\u590d\u4f7f\u7528\u3002"),Object(l.b)("li",{parentName:"ul"},"Data \u56e0\u65f6\u800c\u53d8\u3002"),Object(l.b)("li",{parentName:"ul"},"View \u56e0\u6570\u800c\u53d8\u3002")),Object(l.b)("p",null,"\u73b0\u5728\u4f60\u5e94\u8be5\u660e\u767d\uff0c\u4e3a\u4ec0\u4e48 Facebook \u8bf4\uff1a",Object(l.b)("strong",{parentName:"p"},"\u201cReact \u7ec4\u4ef6\u4e00\u76f4\u66f4\u50cf\u662f\u51fd\u6570\u3002\u201d")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"\u7ec4\u4ef6\u53ea\u4e0d\u8fc7\u662f\u628a\u4f20\u5165\u7684\u53c2\u6570\u5f53\u4f5c\u6570\u636e\uff0c\u518d\u8fd4\u56de\u4e00\u4e2a\u6070\u5f53\u7684\u754c\u9762\u7f62\u4e86\u3002")),Object(l.b)("p",null,"React \u53ea\u4e0d\u8fc7\u662f\u5728\u6b63\u786e\u7684\u65f6\u95f4\u505a\u4e86\u6b63\u786e\u7684\u4e8b\u60c5\u3002"),Object(l.b)("p",null,"\u521a\u4e00\u63a8\u51fa\u5c31\u575a\u6301\u4e0d\u7528 HTML \u6a21\u677f\uff0c\u800c\u662f\u91c7\u7528 ",Object(l.b)("inlineCode",{parentName:"p"},"React.createElement")," \u521b\u5efa\u8282\u70b9\uff0cJSX \u53ef\u4ee5\u770b\u6210\u662f\u59a5\u534f\u7684\u4ea7\u7269\uff0c\u672c\u8d28\u4e0a\u8fd8\u662f JavaScript\u3002"),Object(l.b)("p",null,"\u4e2d\u95f4\u7ecf\u5386\u4e86 class \u7ec4\u4ef6\u4e00\u6ce2\u4e09\u6298\uff0c\u7ec8\u4e8e\u56de\u5f52\u672c\u6e90\u3002"),Object(l.b)("p",null,"\u4e00\u4e2a\u51fd\u6570\uff0c\u51e0\u4e2a\u94a9\u5b50\u3002"),Object(l.b)("p",null,"\u4e00\u684c\u3001\u4e00\u6905\u3001\u4e00\u6247\u3001\u4e00\u629a\u5c3a\u800c\u5df2\u3002"))}s.isMDXComponent=!0},732:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var a=n(0),c=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var i=c.a.createContext({}),s=function(e){var t=c.a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return c.a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return c.a.createElement(c.a.Fragment,{},t)}},m=c.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,r=e.parentName,i=b(e,["components","mdxType","originalType","parentName"]),p=s(n),m=a,d=p["".concat(r,".").concat(m)]||p[m]||u[m]||l;return n?c.a.createElement(d,o(o({ref:t},i),{},{components:n})):c.a.createElement(d,o({ref:t},i))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=m;var o={};for(var b in t)hasOwnProperty.call(t,b)&&(o[b]=t[b]);o.originalType=e,o.mdxType="string"==typeof e?e:a,r[1]=o;for(var i=2;i<l;i++)r[i]=n[i];return c.a.createElement.apply(null,r)}return c.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);